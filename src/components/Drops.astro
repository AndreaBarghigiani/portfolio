---
import { Icon } from 'astro-icon/components';
---

<Icon
  name="drop-1"
  class="drop-icon dark:text-coffee-800 text-coffee-200 absolute top-8 left-10 z-10 hidden size-6 lg:block"
/>
<Icon
  name="drop-2"
  class="drop-icon dark:text-coffee-800 text-coffee-200 absolute top-4 left-6 z-10 hidden size-5 lg:block"
/>
<Icon
  name="drop-3"
  class="drop-icon dark:text-coffee-800 text-coffee-200 absolute top-10 left-4 z-10 hidden size-5 lg:block"
/>
<Icon
  name="drop-4"
  class="drop-icon dark:text-coffee-800 text-coffee-200 absolute top-4.5 left-16 z-10 hidden size-5 lg:block"
/>
<Icon
  name="drop-5"
  class="drop-icon dark:text-coffee-800 text-coffee-200 absolute top-14 left-16 z-10 hidden size-5 rotate-45 lg:block"
/>

<Icon
  name="stain"
  class="stain-icon dark:text-coffee-800 text-coffee-200 absolute top-12 left-10 z-10 hidden size-32 lg:block"
/>

<script>
  // Import motion directly in the client-side script
  import { animate, stagger } from 'motion';

  const icons = document.querySelectorAll('.drop-icon');
  const stain = document.querySelector('.stain-icon');

  animate(
    icons,
    {
      // @ts-expect-error: don't understand why Motion sees an error here...
      opacity: [0, 1, 1],
      scale: [1.5, 0.95, 1.1, 1],
      filter: ['blur(4px)', 'blur(0px)', 'blur(0px)'],
    },
    {
      delay: stagger(0.25, { startDelay: 0.2 }),
      duration: 0.2,
      easing: [0.16, 1, 0.3, 1],
    }
  );

  if (stain) {
    animate(
      stain,
      {
        // @ts-expect-error: don't understand why Motion sees an error here...
        opacity: [0, 1, 1],
        //   scale: [1.5, 0.95, 1.1, 1],
        rotate: [-110, -120, -115],
        // filter: ['blur(4px)', 'blur(0px)', 'blur(0px)'],
      },
      {
        delay: 2,
        duration: 0.5,
        easing: 'ease-in-out',
      }
    );
  }
</script>
